
///////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2002, Perry L. Miller IV
//  All rights reserved.
//  BSD License: http://www.opensource.org/licenses/bsd-license.html
//
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//
//  Error class.
//
///////////////////////////////////////////////////////////////////////////////

#ifndef _XML_TOOLS_ERROR_H_
#define _XML_TOOLS_ERROR_H_

#include "cppdom/cppdom.h"


namespace XML {


class Error
{
public:

  /////////////////////////////////////////////////////////////////////////////
  //
  //  Constructors.
  //
  /////////////////////////////////////////////////////////////////////////////

  Error() : 
    _error ( cppdom::xml_dummy, "", "" ),
    _context ( 0x0 )
  {
  }
  Error ( const Error &e ) : 
    _error ( e._error ),
    _context ( e._context )
  {
  }
  Error ( const cppdom::Error &e ) : 
    _error ( e ),
    _context ( 0x0 )
  {
  }


  /////////////////////////////////////////////////////////////////////////////
  //
  //  Assignment.
  //
  /////////////////////////////////////////////////////////////////////////////

  Error &operator = ( const Error &e )
  {
    _error = e._error;
    _context = e._context;
    return *this;
  }


  /////////////////////////////////////////////////////////////////////////////
  //
  //  Set/get error.
  //
  /////////////////////////////////////////////////////////////////////////////

  void error ( const cppdom::Error &e )
  {
    _error = e;
  }
  const cppdom::Error &error() const
  {
    return _error;
  }


  /////////////////////////////////////////////////////////////////////////////
  //
  //  Set/get context.
  //
  /////////////////////////////////////////////////////////////////////////////

  void context ( const cppdom::ContextPtr &c )
  {
    _context = c;
  }
  const cppdom::ContextPtr &context() const
  {
    return _context;
  }


  /////////////////////////////////////////////////////////////////////////////
  //
  //  Get the line.
  //
  /////////////////////////////////////////////////////////////////////////////

  int line() const
  {
    return ( _context.get() ) ? _context->getLocation().getLine() : -1;
  }


  /////////////////////////////////////////////////////////////////////////////
  //
  //  Get the position.
  //
  /////////////////////////////////////////////////////////////////////////////

  int position() const
  {
    return ( _context.get() ) ? _context->getLocation().getPos() : -1;
  }


  /////////////////////////////////////////////////////////////////////////////
  //
  //  Get the message.
  //
  /////////////////////////////////////////////////////////////////////////////

  std::string message() const
  {
    return _error.getStrError();
  }


private:

  cppdom::Error _error;
  cppdom::ContextPtr _context;
};


}; // namespace XML


#endif // _XML_TOOLS_ERROR_H_
