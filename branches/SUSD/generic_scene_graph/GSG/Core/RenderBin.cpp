
///////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2002, Perry L. Miller IV
//  All rights reserved.
//  BSD License: http://www.opensource.org/licenses/bsd-license.html
//
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//
//  The "bin" of elements that will be drawn.
//
///////////////////////////////////////////////////////////////////////////////

#include "GSG/Core/Precompiled.h"
#include "GSG/Core/RenderBin.h"

using namespace GSG;

GSG_IMPLEMENT_REFERENCED ( RenderBin );


/////////////////////////////////////////////////////////////////////////////
//
//  Constructor.
//
/////////////////////////////////////////////////////////////////////////////

RenderBin::RenderBin() : Referenced(), 
  _elements()
{
  // Empty.
}


/////////////////////////////////////////////////////////////////////////////
//
//  Copy constructor.
//
/////////////////////////////////////////////////////////////////////////////

RenderBin::RenderBin ( const RenderBin &b ) : Referenced ( b ), 
  _elements ( b._elements )
{
  // Empty.
}


/////////////////////////////////////////////////////////////////////////////
//
//  Destructor.
//
/////////////////////////////////////////////////////////////////////////////

RenderBin::~RenderBin()
{
  // Empty.
}


/////////////////////////////////////////////////////////////////////////////
//
//  Add an element.
//
/////////////////////////////////////////////////////////////////////////////

void RenderBin::add ( RenderElement *e )
{
  Lock lock ( this );
  _elements.insert ( _elements.end(), e );
}


/////////////////////////////////////////////////////////////////////////////
//
//  Iterators to the elements.
//
/////////////////////////////////////////////////////////////////////////////

RenderBin::const_iterator RenderBin::begin() const
{
  return _elements.begin();
}


/////////////////////////////////////////////////////////////////////////////
//
//  Iterators to the elements.
//
/////////////////////////////////////////////////////////////////////////////

RenderBin::iterator RenderBin::begin()
{
  return _elements.begin();
}


/////////////////////////////////////////////////////////////////////////////
//
//  Iterators to the elements.
//
/////////////////////////////////////////////////////////////////////////////

RenderBin::const_iterator RenderBin::end() const
{
  return _elements.end();
}


/////////////////////////////////////////////////////////////////////////////
//
//  Iterators to the elements.
//
/////////////////////////////////////////////////////////////////////////////

RenderBin::iterator RenderBin::end()
{
  return _elements.end();
}


/////////////////////////////////////////////////////////////////////////////
//
//  Clear the bin.
//
/////////////////////////////////////////////////////////////////////////////

void RenderBin::clear()
{
  Lock lock ( this );
  _elements.erase ( _elements.begin(), _elements.end() );
}


/////////////////////////////////////////////////////////////////////////////
//
//  Set from the given object.
//
/////////////////////////////////////////////////////////////////////////////

void RenderBin::setFrom ( const RenderBin &b )
{
  Lock lock ( this );

  // Set the members.
  _elements = b._elements;

  // Call the base class's function.
  BaseClass::setFrom ( b );
}
