
///////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2002, Perry L. Miller IV
//  All rights reserved.
//  BSD License: http://www.opensource.org/licenses/bsd-license.html
//
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//
//  Main window.
//
///////////////////////////////////////////////////////////////////////////////

#ifdef _WIN32
# pragma warning(disable:4786) // Truncated debug names.
#endif

#include "MainWindow.h"
#include "ChildWindow.h"

#include "Standard/SlAssert.h"

using namespace CadKit;


///////////////////////////////////////////////////////////////////////////////
//
//  Message maps.
//
/////////////////////////////////////////////////////////////////////////////

FXDEFMAP ( MainWindow ) WindowMap[] = 
{
  // Message_Type          ID                  Message_Handler.
  FXMAPFUNC ( SEL_COMMAND, MainWindow::ID_NEW, MainWindow::onCommandNew ),
};

FXIMPLEMENT ( MainWindow, FoxMdiMainWindow, WindowMap, ARRAYNUMBER ( WindowMap ) );


///////////////////////////////////////////////////////////////////////////////
//
//  Constructor.
//
///////////////////////////////////////////////////////////////////////////////

MainWindow::MainWindow() : FoxMdiMainWindow()
{
  // Don't use this constructor.
  SL_ASSERT ( 0 );
}


///////////////////////////////////////////////////////////////////////////////
//
//  Constructor.
//
///////////////////////////////////////////////////////////////////////////////

MainWindow::MainWindow ( FXApp *app, const FXString &name, const FXint &w, const FXint &h ) : 
  FoxMdiMainWindow ( app, name, NULL, NULL, DECOR_ALL, 0, 0, w, h )
{
  // Empty.
}


///////////////////////////////////////////////////////////////////////////////
//
//  Destructor.
//
///////////////////////////////////////////////////////////////////////////////

MainWindow::~MainWindow()
{
  // Nothing to delete.
}


///////////////////////////////////////////////////////////////////////////////
//
//  Called when the "New" button is picked.
//
///////////////////////////////////////////////////////////////////////////////

long MainWindow::onCommandNew ( FXObject *, FXSelector, void * )
{
  SL_ASSERT ( this );
  SL_ASSERT ( _clientArea.isValid() );
  SL_ASSERT ( _mdiMenu.isValid() );

  static unsigned int count ( 0 );
  char name[512];
  ::sprintf ( name, "Child %d", ++count );

  ChildWindow *child = new ChildWindow ( name, this );
  child->create();
  child->init();

  return 1;
}
