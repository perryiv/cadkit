
///////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2002, Perry L. Miller IV
//  All rights reserved.
//  BSD License: http://www.opensource.org/licenses/bsd-license.html
//
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//
//  Class the returns time nicely formatted dates and times.
//
///////////////////////////////////////////////////////////////////////////////

#include "Usul/System/DateTime.h"

#include <ctime>


///////////////////////////////////////////////////////////////////////////////
//
//  Returns current date and time in a formatted string.
//
///////////////////////////////////////////////////////////////////////////////

std::string Usul::System::DateTime::now() 
{
  // Return current time.
  return Usul::System::DateTime::format ( ::time ( 0x0 ) );
}


///////////////////////////////////////////////////////////////////////////////
//
//  Returns given date and time in a formatted string.
//
///////////////////////////////////////////////////////////////////////////////

std::string Usul::System::DateTime::format ( long t ) 
{
  // Convert it to a string.
  const unsigned int size ( 1024 );
  char buffer[size];
  ::memset ( buffer, '\0', size );
  ::strftime ( buffer, size - 1, "%a %Y-%b-%d %I:%M:%S %p", ::localtime ( &t ) );

  // Return the string.
  return std::string ( buffer );
}
