
///////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2002, Perry L Miller IV
//  All rights reserved.
//  BSD License: http://www.opensource.org/licenses/bsd-license.html
//
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//
//  Adapts events for OSG.
//
///////////////////////////////////////////////////////////////////////////////

#include "OsgTools/Render/EventAdapter.h"

using namespace OsgTools::Render;

///////////////////////////////////////////////////////////////////////////////
//
//  Constructor.
//
///////////////////////////////////////////////////////////////////////////////

EventAdapter::EventAdapter() : BaseClass ()
{
	this->setMouseYOrientation ( Y_INCREASING_UPWARDS );
}


///////////////////////////////////////////////////////////////////////////////
//
//  Destructor.
//
///////////////////////////////////////////////////////////////////////////////

EventAdapter::~EventAdapter()
{
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the size.
//
///////////////////////////////////////////////////////////////////////////////

void EventAdapter::setWindowSize ( const Usul::Math::Vec2ui &size )
{
  _Xmin = _Ymin = 0.0;
  _Xmax = size[0];
  _Ymax = size[1];
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the mouse coordinate in the range [-1,1].
//
///////////////////////////////////////////////////////////////////////////////

void EventAdapter::setMouse ( const Usul::Math::Vec2f &xy )
{
  const float mouseX ( xy[0] );
  const float mouseY ( xy[1] );
  _mx = mouseX;
  _my = mouseY;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the event type.
//
///////////////////////////////////////////////////////////////////////////////

void EventAdapter::setEventType ( const EventType &type )
{
  _eventType = type;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the event time.
//
///////////////////////////////////////////////////////////////////////////////

void EventAdapter::setSeconds ( double seconds )
{
  _time = seconds;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the buttons mask.
//
///////////////////////////////////////////////////////////////////////////////

void EventAdapter::setButtonMask ( bool left, bool middle, bool right )
{
  _buttonMask = 0;
  _buttonMask |= ( ( left   ) ? BaseClass::LEFT_MOUSE_BUTTON   : 0 );
  _buttonMask |= ( ( middle ) ? BaseClass::MIDDLE_MOUSE_BUTTON : 0 );
  _buttonMask |= ( ( right  ) ? BaseClass::RIGHT_MOUSE_BUTTON  : 0 );
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the buttons.
//
///////////////////////////////////////////////////////////////////////////////

void EventAdapter::setButton ( bool left, bool middle, bool right )
{
  if ( left )
    _button = osgGA::GUIEventAdapter::LEFT_MOUSE_BUTTON;
  else if ( middle )
    _button = osgGA::GUIEventAdapter::MIDDLE_MOUSE_BUTTON;
  else if ( right )
    _button = osgGA::GUIEventAdapter::RIGHT_MOUSE_BUTTON;
}
