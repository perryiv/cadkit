
///////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2007, Arizona State University
//  All rights reserved.
//  BSD License: http://www.opensource.org/licenses/bsd-license.html
//  Created by: Adam Kubach
//
///////////////////////////////////////////////////////////////////////////////

#include "WmsLayer.h"

#include "Usul/Strings/ManagedToNative.h"

#include "ossimPlanet/ossimPlanetWmsImageLayer.h"

using namespace CadKit::OSSIMPlanet::Glue;


///////////////////////////////////////////////////////////////////////////////
//
//  Constructor.
//
///////////////////////////////////////////////////////////////////////////////

WmsLayer::WmsLayer() : _wmsImageLayer ( new ossimPlanetWmsImageLayer )
{
  _wmsImageLayer->ref();
  _wmsImageLayer->setTransparentFlag( true );

  _wmsImageLayer->setTransparentColorFlag( true );
  _wmsImageLayer->setTransparentColor( 255, 255, 255 );
}


///////////////////////////////////////////////////////////////////////////////
//
//  Destructor.
//
///////////////////////////////////////////////////////////////////////////////

WmsLayer::~WmsLayer()
{
  if( 0x0 != _wmsImageLayer )
  {
    _wmsImageLayer->unref();
    _wmsImageLayer = 0x0;
  }
}


///////////////////////////////////////////////////////////////////////////////
//
//  Finalizer.
//
///////////////////////////////////////////////////////////////////////////////

WmsLayer::!WmsLayer()
{
  if( 0x0 != _wmsImageLayer )
  {
    _wmsImageLayer->unref();
    _wmsImageLayer = 0x0;
  }
}


///////////////////////////////////////////////////////////////////////////////
//
//  Get the name.
//
///////////////////////////////////////////////////////////////////////////////

System::String^ WmsLayer::Name::get()
{
  return this->Server;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the name.
//
///////////////////////////////////////////////////////////////////////////////

void WmsLayer::Name::set ( System::String^ s )
{
  this->Server = s;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Get the shown flag.
//
///////////////////////////////////////////////////////////////////////////////

bool WmsLayer::Shown::get()
{
  return true;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Get the needs update flag.
//
///////////////////////////////////////////////////////////////////////////////

bool WmsLayer::NeedsUpdate::get()
{
  return false;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the needs update flag.
//
///////////////////////////////////////////////////////////////////////////////

void WmsLayer::NeedsUpdate::set( bool b )
{
}


///////////////////////////////////////////////////////////////////////////////
//
//  Show.
//
///////////////////////////////////////////////////////////////////////////////

void WmsLayer::show()
{
}


///////////////////////////////////////////////////////////////////////////////
//
//  Modify.
//
///////////////////////////////////////////////////////////////////////////////

void WmsLayer::modify()
{
}


///////////////////////////////////////////////////////////////////////////////
//
//  Hide.
//
///////////////////////////////////////////////////////////////////////////////

void WmsLayer::hide()
{
}


///////////////////////////////////////////////////////////////////////////////
//
//  Add to favorites.
//
///////////////////////////////////////////////////////////////////////////////

void WmsLayer::addToFavorites()
{
}


///////////////////////////////////////////////////////////////////////////////
//
//  Get the native pointer.
//
///////////////////////////////////////////////////////////////////////////////

System::IntPtr WmsLayer::nativeIntPtr()
{
  return System::IntPtr ( _wmsImageLayer );
}


///////////////////////////////////////////////////////////////////////////////
//
//  Get the server.
//
///////////////////////////////////////////////////////////////////////////////

System::String^ WmsLayer::Server::get()
{
  return gcnew System::String ( _wmsImageLayer->getServer().c_str() );
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the server.
//
///////////////////////////////////////////////////////////////////////////////

void WmsLayer::Server::set( System::String^ s )
{
  _wmsImageLayer->setServer ( Usul::Strings::convert( s ) );
}


///////////////////////////////////////////////////////////////////////////////
//
//  Get the cache directory.
//
///////////////////////////////////////////////////////////////////////////////

System::String^ WmsLayer::CacheDirectory::get()
{
  return gcnew System::String ( _wmsImageLayer->getCacheDirectory().c_str() );
}


///////////////////////////////////////////////////////////////////////////////
//
//  Set the cache directory.
//
///////////////////////////////////////////////////////////////////////////////

void WmsLayer::CacheDirectory::set ( System::String^ s )
{
  _wmsImageLayer->setCacheDirectory( Usul::Strings::convert( s ).c_str() );
}

