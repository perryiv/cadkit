
///////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2005, Adam Kubach
//  All rights reserved.
//  BSD License: http://www.opensource.org/licenses/bsd-license.html
//
///////////////////////////////////////////////////////////////////////////////

#include "FoxTools/ToolBar/DockSite.h"

#include "FoxTools/Headers/DockSite.h"

#include <algorithm>
#include <functional>

using namespace FoxTools::ToolBar;


///////////////////////////////////////////////////////////////////////////////
//
//  Constructor
//
///////////////////////////////////////////////////////////////////////////////

DockSite::DockSite( FX::FXComposite *parent, unsigned int layout ) :
BaseClass ( "" ),
_bars(),
_docksite( new FX::FXDockSite( parent, layout ) )
{
}


///////////////////////////////////////////////////////////////////////////////
//
//  Destructor
//
///////////////////////////////////////////////////////////////////////////////

DockSite::~DockSite()
{
  this->clear();

  delete _docksite;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Get the FOX DockSite
//
///////////////////////////////////////////////////////////////////////////////

FX::FXDockSite* DockSite::dockSite()
{
  return _docksite;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Append
//
///////////////////////////////////////////////////////////////////////////////

void DockSite::append( Bar *bar )
{
  _bars.push_back( bar );
}


///////////////////////////////////////////////////////////////////////////////
//
//  Build
//
///////////////////////////////////////////////////////////////////////////////

void DockSite::build()
{
  // Return now if bars is empty
  if( _bars.empty() )
    return;

  unsigned int layout ( FX::LAYOUT_SIDE_TOP | FX::FRAME_RAISED );

  // We know we have at least one
  _bars.front()->build( true, layout | FX::LAYOUT_DOCK_NEXT );

  // Go through the rest
  for( Bars::iterator i = _bars.begin() + 1; i != _bars.end(); ++i )
  {
    (*i)->build( true, layout | FX::LAYOUT_DOCK_SAME );
  }
}


///////////////////////////////////////////////////////////////////////////////
//
//  Clear
//
///////////////////////////////////////////////////////////////////////////////

void DockSite::clear()
{
  // Call "clear" for every tool-bar
  std::for_each ( _bars.begin(), _bars.end(), std::mem_fun ( &Bar::clear ) );

  // Now empty the sequence.
  _bars.clear();
}


///////////////////////////////////////////////////////////////////////////////
//
//  Hide
//
///////////////////////////////////////////////////////////////////////////////

void DockSite::hide()
{
  _docksite->hide();
}


///////////////////////////////////////////////////////////////////////////////
//
//  Show
//
///////////////////////////////////////////////////////////////////////////////

void DockSite::show()
{
  _docksite->show();
}


