
///////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2002, Perry L Miller IV
//  All rights reserved.
//  BSD License: http://www.opensource.org/licenses/bsd-license.html
//
///////////////////////////////////////////////////////////////////////////////

///////////////////////////////////////////////////////////////////////////////
//
//  Icon class.
//
///////////////////////////////////////////////////////////////////////////////

#include "AppFrameWork/Core/Icon.h"

#include "Usul/Predicates/FileExists.h"
#include "Usul/Errors/Stack.h"
#include "Usul/CommandLine/Arguments.h"

using namespace AFW::Core;


///////////////////////////////////////////////////////////////////////////////
//
//  Constructor.
//
///////////////////////////////////////////////////////////////////////////////

Icon::Icon ( const std::string &file ) : BaseClass(),
  _file ( file )
{
  // Does the file exist?
  Usul::Predicates::FileExists exists;
  if ( false == exists ( _file ) )
  {
    // Try the application's directory.
    std::ostringstream path;
    path << Usul::CommandLine::Arguments::instance().directory() << '/' << _file << ".gif";
    if ( false == exists ( path.str() ) )
    {
      std::ostringstream out;
      out << "Warning 1499293566: icon file " << file << " not found. Tried: '" << _file << "' and '" << path.str() << "'";
      Usul::Errors::Stack::instance().push ( out.str() );
    }
    else
    {
      _file = path.str();
    }
  }
}


///////////////////////////////////////////////////////////////////////////////
//
//  Destructor.
//
///////////////////////////////////////////////////////////////////////////////

Icon::~Icon()
{
}


///////////////////////////////////////////////////////////////////////////////
//
//  Get the file.
//
///////////////////////////////////////////////////////////////////////////////

const std::string &Icon::file() const
{
  return _file;
}
