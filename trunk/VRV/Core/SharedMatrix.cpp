
///////////////////////////////////////////////////////////////////////////////
//
//  Copyright (c) 2007, Arizona State University
//  All rights reserved.
//  BSD License: http://www.opensource.org/licenses/bsd-license.html
//  Created by: Adam Kubach
//
///////////////////////////////////////////////////////////////////////////////

#include "VRV/Core/SharedMatrix.h"

#include "vpr/IO/ObjectReader.h"
#include "vpr/IO/ObjectWriter.h"

using namespace VRV::Core;

///////////////////////////////////////////////////////////////////////////////
//
//  Constructor.
//
///////////////////////////////////////////////////////////////////////////////

SharedMatrix::SharedMatrix() : 
  BaseClass(),
  _matrix()
{
}


///////////////////////////////////////////////////////////////////////////////
//
//  Destructor.
//
///////////////////////////////////////////////////////////////////////////////

SharedMatrix::~SharedMatrix()
{
}


///////////////////////////////////////////////////////////////////////////////
//
//  Read the matrix.
//
///////////////////////////////////////////////////////////////////////////////

vpr::ReturnStatus SharedMatrix::readObject ( vpr::ObjectReader *reader )
{
  osg::Matrixd::value_type *ptr ( _matrix.ptr() );
  for ( unsigned int i = 0; i < 16; ++i )
    reader->readDouble( ptr[i] );

  return vpr::ReturnStatus::Succeed;
}


///////////////////////////////////////////////////////////////////////////////
//
//  Write the matrix.
//
///////////////////////////////////////////////////////////////////////////////

vpr::ReturnStatus SharedMatrix::writeObject ( vpr::ObjectWriter *writer )
{
  const osg::Matrixd::value_type *ptr ( _matrix.ptr() );
  for ( unsigned int i = 0; i < 16; ++i )
    writer->writeDouble( ptr[i] );

  return vpr::ReturnStatus::Succeed;
}
